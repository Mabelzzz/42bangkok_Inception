; =====================================================================
; PHP-FPM pool configuration for WordPress
; This pool listens on TCP port 9000 so Nginx can connect across containers
; =====================================================================

[www]

; Run PHP-FPM workers as www-data (standard for Debian + Nginx)
user = www-data
group = www-data

; IMPORTANT:
; Listen on TCP port instead of Unix socket
; This is REQUIRED because Nginx and PHP-FPM are in different containers
listen = 0.0.0.0:9000

; Socket permissions (still required even when using TCP)
listen.owner = www-data
listen.group = www-data

; Process manager configuration
; "dynamic" is memory-friendly and sufficient for this project
pm = dynamic
pm.max_children = 5
pm.start_servers = 2
pm.min_spare_servers = 1
pm.max_spare_servers = 3

; CRITICAL FOR DOCKER:
; Allow PHP-FPM to read environment variables from Docker
; Without this, getenv("WP_DB_PASSWORD") will NOT work
clear_env = no

; =====================================================================
; End of www.conf
; =====================================================================
